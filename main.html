<!DOCTYPE html>
<html>
<head>
	<title>WakBot</title>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<meta charset="UTF-8">
	<script src="lib/jquery.min.js"></script>
	<script src="lib/chai.js"></script>
	<script src="lib/mocha.js"></script>
	<link rel="stylesheet" href="css/mocha.css">
</head>
<body>
	<div id="mocha"></div>
	<button style="position: fixed; bottom: 5px; right: 5px;" onclick="studio.extension.quitDialog()">Close</button>
	<script>
		try {
			mocha.setup('bdd');
			mocha.reporter('html');
			var expect = chai.expect;
			var env = studio.extension.storage.dialogArguments;
			if (typeof env.wakbot_extension_test_path !== 'undefined') {
				env.wakbot_extension_test_path = env.wakbot_extension_test_path.replace(/\\/g, '/');
				var testFile = studio.File(env.wakbot_extension_test_path);
				eval(testFile.toString()); // include(testFile.path); works only once (?!)
			}
			mocha.checkLeaks();
			mocha.globals(['jQuery']);
			mocha.run();
		} catch (e) {

		}
	</script>
</body>
</html>
